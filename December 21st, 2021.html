<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>December 21st, 2021 | notes | kipras melnikovas</title>

		<link rel="shortcut icon" type="image/x-icon" href="/notes/favicon.ico">
		
		<script>
			/**
			 * if the website is mounted on a different path than the assumed "/notes",
			 * this will be needed for some links to work.
			 * 
			 * removes n paths (as specified at compile time with "depthUntilRootPage"),
			 * to make the href work again.
			 */
			document
				.querySelector('link[type="image/x-icon"]')
				.setAttribute(
					"href",
					window.location.href.replace(
													/(\/[^\/]*$){1}/, "")
													+
													"/favicon.ico"
												);
		</script>


		<style>
			/*
				first child
			*/
			ul li:nth-child(1) {
				margin-top: 8px;

				/*
				color: green;
				*/
			}

			/*
				everyone except the first child
			*/
			ul li + li {
				margin-top: 8px;

				/*
				color: blue;
				*/
			}

			/*
				works almost exactly how it should
				but the problem is -- the href element should only appear
				when you hover the __list-style item of the li__,
				and __not__ the li itself.

				that would also fix the problem that
				the :hover propagates up into higher li's.
			*/
			/*
			ul > li[id]:hover {
				list-style: none;
			}
			*/
			/*
				we used these 2 w/ the previous one,
				but turns out it's pretty meh,
				& also the links are not clickable unless you're hovering,
				which is not ideal, e.g. screen readers, or even vimium
			*/
			/*
			ul > li[id] a {
				visibility: hidden;
			}

			ul > li[id]:hover > a {
				visibility: initial;
			}
			*/

			/*
				simply become an invisible, empty, yet clickable, element,
				& hide right behind the list-style'ing of the <li>
			*/
			a.block-ref {
				/* ensure moves left */
				float: left;

				/* moves right around the list-style'ing */
				margin-left: -21px;
				margin-top: -1px;

				width: 20px;
				height: 20px;

				/*
					become clickable, even if hovering on the li's list-style'ing
					does not seem to be going in weird places, surprisingly just works
				*/
				position: absolute;
			}

		</style>

		<script type="text/javascript">
			/** note - interval won't work because of this - if enabling again (unlikely), disable this: */
			var pageLoadTime = new Date();

			function updateAndSetIntervalToUpdateFor(id, initialTimeMs) {
				var el = document.getElementById(id);

				function update() {
					/**
					 * floor & divide & multiple to make the milisecond difference go away,
					 * so that if multiple functions are called,
					 * and the page is refreshed fast,
					 * all values update at the same time.
					 */
					var msAgo = pageLoadTime.getTime() - (Math.floor(initialTimeMs / 1000) * 1000);
					/* var msAgo = new Date().getTime() - initialTimeMs; */

					var secAgo =  msAgo / 1000;
					var minAgo = secAgo /   60;
					var hAgo   = minAgo /   60;
					var dayAgo =   hAgo /   24;

					dayAgo = Math.floor(dayAgo);
					hAgo   = Math.floor(  hAgo);
					minAgo = Math.floor(minAgo);
					secAgo = Math.floor(secAgo);
					msAgo  = Math.floor( msAgo);

					msAgo  = msAgo  - (secAgo * 1000);
					secAgo = secAgo - (minAgo *   60);
					minAgo = minAgo - (  hAgo *   60);
					hAgo   = hAgo   - (dayAgo *   24);
					dayAgo = dayAgo                  ;

					console.log({ id, dayAgo, hAgo, minAgo, secAgo, msAgo });

					el.textContent = dayAgo + " days, " + (hAgo) + " hours, " + (minAgo) + " mins, " + (secAgo) + " seconds" + " ago."
				};

				update();
				
				/* disabled because gives false sense of security because if actually re-generated, it won't refresh the page. */
				/* window.setInterval(update, 1000); */
			}
		</script>
		<!--
					el.textContent = "(" + dayAgo + " days, " + (hAgo) + " hours, " + (minAgo) + " mins, " + (secAgo) + " secs" + " ago)";

				window.setInterval(update, 1000);
		-->

	</head>

	<body>
		<nav>
			<!--
				TODO "in graphName"
			-->
			<a id="all-notes" href="/notes">
				all notes
			</a>
			
		<script>
			/**
			 * if the website is mounted on a different path than the assumed "/notes",
			 * this will be needed for some links to work.
			 * 
			 * removes n paths (as specified at compile time with "depthUntilRootPage"),
			 * to make the href work again.
			 */
			document
				.querySelector('a#all-notes')
				.setAttribute(
					"href",
					window.location.href.replace(
													/(\/[^\/]*$){1}/, "")
													+
													"/"
												);
		</script>

		</nav>

		<h1>
			December 21st, 2021
		</h1>

		<small>
			<table>
				<tbody>
					<tr title="self + linked mentions = total">
						<td>words:</td>
						<td>
							<span>1045</span>
							+ <span>0</span>
							= <span>1045</span>
						</td>
					</tr>
					<tr title="2022-06-15T09:27:50.888Z (only self: 2021-12-20T22:00:09.608Z)"> <!-- GIT_MEANINGLESS_CHANGE -->
						<td>last update:</td>
						<td>
							<span id="ago-2"></span>
						</td>
					</tr>
				</tbody>
			</table>

			<script type="text/javascript">
				updateAndSetIntervalToUpdateFor("ago-2", 1655285270888); /** GIT_MEANINGLESS_CHANGE */
			</script>
		</small>

		<main>
			<ul>
				<li id="qyQpiD5t_">
					<a href="#qyQpiD5t_" class="block-ref"></a>
					<div style="max-width: 65ch;">
							{{[[DONE]]}} (hidden) qyQpiD5t_ 
					</div>
				</li>
				<li id="GJSHDNTOr">
					<a href="#GJSHDNTOr" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) GJSHDNTOr
					</div>
				</li>
				<li id="f_PWNuoPS">
					<a href="#f_PWNuoPS" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) f_PWNuoPS [[(hidden) F3IIXCSCa]] [[(hidden) s-Ow4R2Dp]]
					</div>
					<ul>
						<li id="KBZ_8LL4x">
							<a href="#KBZ_8LL4x" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) KBZ_8LL4x
							</div>
						</li>
						<li id="3Gmw3HiY1">
							<a href="#3Gmw3HiY1" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) 3Gmw3HiY1
							</div>
						</li>
						<li id="pcug2XOKw">
							<a href="#pcug2XOKw" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) pcug2XOKw
							</div>
						</li>
						<li id="uXw-tOp4J">
							<a href="#uXw-tOp4J" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) uXw-tOp4J
							</div>
							<ul>
								<li id="T8wq3XlGo">
									<a href="#T8wq3XlGo" class="block-ref"></a>
									<div style="max-width: 65ch;">
											(hidden) T8wq3XlGo
									</div>
								</li>
								<li id="OEHP6rk7Q">
									<a href="#OEHP6rk7Q" class="block-ref"></a>
									<div style="max-width: 65ch;">
											(hidden) OEHP6rk7Q
									</div>
								</li>
								<li id="fwryzLFr7">
									<a href="#fwryzLFr7" class="block-ref"></a>
									<div style="max-width: 65ch;">
											(hidden) fwryzLFr7
									</div>
								</li>
								<li id="GAu9hf39f">
									<a href="#GAu9hf39f" class="block-ref"></a>
									<div style="max-width: 65ch;">
											(hidden) GAu9hf39f
									</div>
								</li>
							</ul>
						</li>
						<li id="bMFXnNkE0">
							<a href="#bMFXnNkE0" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) bMFXnNkE0
							</div>
						</li>
						<li id="alm9MviV9">
							<a href="#alm9MviV9" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) alm9MviV9 [[(hidden) BC3_6P1lo]]
							</div>
							<ul>
								<li id="87zapAdN2">
									<a href="#87zapAdN2" class="block-ref"></a>
									<div style="max-width: 65ch;">
											(hidden) 87zapAdN2
									</div>
								</li>
								<li id="fSIykfew-">
									<a href="#fSIykfew-" class="block-ref"></a>
									<div style="max-width: 65ch;">
											(hidden) fSIykfew-
									</div>
								</li>
							</ul>
						</li>
						<li id="4Zh_cPVDO">
							<a href="#4Zh_cPVDO" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) 4Zh_cPVDO
							</div>
						</li>
					</ul>
				</li>
				<li id="D3LUWR3nG">
					<a href="#D3LUWR3nG" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) D3LUWR3nG
					</div>
				</li>
				<li id="m4F9wBSgA">
					<a href="#m4F9wBSgA" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) m4F9wBSgA
					</div>
				</li>
				<li id="DJj8msH7c">
					<a href="#DJj8msH7c" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) DJj8msH7c
					</div>
				</li>
				<li id="zVQkWf-kY">
					<a href="#zVQkWf-kY" class="block-ref"></a>
					<div style="max-width: 65ch;">
							{{[[TODO]]}} (hidden) zVQkWf-kY [[(hidden) _hKhPUEak]]
					</div>
					<ul>
						<li id="oQo7cjjHk">
							<a href="#oQo7cjjHk" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) oQo7cjjHk
							</div>
						</li>
						<li id="1HjqvWVoN">
							<a href="#1HjqvWVoN" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) 1HjqvWVoN
							</div>
						</li>
						<li id="h1vFDLeEx">
							<a href="#h1vFDLeEx" class="block-ref"></a>
							<div style="max-width: 65ch;">
									(hidden) h1vFDLeEx
							</div>
						</li>
					</ul>
				</li>
				<li id="ep1WBLjxv">
					<a href="#ep1WBLjxv" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) ep1WBLjxv
					</div>
				</li>
				<li id="4l1gqB4cF">
					<a href="#4l1gqB4cF" class="block-ref"></a>
					<div style="max-width: 65ch;">
							[[git-stacked-rebase]]
					</div>
					<ul>
						<li id="el1TOG8X8">
							<a href="#el1TOG8X8" class="block-ref"></a>
							<div style="max-width: 65ch;">
									{{[[TODO]]}} ffs, the `Exitable` stuff is bad tbh, `exit` was a `TypeError` instead of an exit code / proper error - was hard to find, no good, gotta fix.
							</div>
							<ul>
								<li id="4R3-dZkR-">
									<a href="#4R3-dZkR-" class="block-ref"></a>
									<div style="max-width: 65ch;">
											and i had fixed the code that was causing this error 2 days ago already, but that&#39;s irrelevant - it&#39;s easy to make such mistakes w/ this infra, which is a no no.
									</div>
								</li>
							</ul>
						</li>
						<li id="beLdGUUuT">
							<a href="#beLdGUUuT" class="block-ref"></a>
							<div style="max-width: 65ch;">
									{{[[TODO]]}} we __really__ need e2e tests
							</div>
							<ul>
								<li id="pfp7bixos">
									<a href="#pfp7bixos" class="block-ref"></a>
									<div style="max-width: 65ch;">
											also where the initial issue came from (re: [Exitable](((el1TOG8X8)))) - i just found out (by using the tool myself ofc) that i introduced a regression sometime between [that fix](((4R3-dZkR-))) (0.4.1) and now (0.5.0).
									</div>
									<ul>
										<li id="MjekFDZx8">
											<a href="#MjekFDZx8" class="block-ref"></a>
											<div style="max-width: 65ch;">
													`git bisect` suspect - `0657970dd2303f264036606e0cdc06b6854a0104`
											</div>
											<ul>
												<li id="R3i5nNKwX">
													<a href="#R3i5nNKwX" class="block-ref"></a>
													<div style="max-width: 65ch;">
															figured it out - it&#39;s because in the very ending of the `gitStackedRebase`, we `markThatNeedsToApply()`, and __then__ we call `applyIfNeedsToApply()`, which, of course, will now always think that we need to apply.
												other notes:
												it makes it impossible to e.g. `edit` in the rebase-todo -  it continues (apply&#39;ing?) w/o stopping
												and might explode if we start a new git-stacked-rebase for the first time (i.e. there&#39;s no `.git/stacked-rebase/` folder, specifically `.git/stacked-rebase/rewritten-list` file in this case)
												also, it&#39;d be even harder to find because we&#39;d only call the `applyIfNeedsToApply()` in the very end if `configValues.autoApplyIfNeeded` was true (design choice which made &amp; still makes sense; it just makes the current bug harder to find)
													</div>
													<ul>
														<li id="Ht6sYbjh0">
															<a href="#Ht6sYbjh0" class="block-ref"></a>
															<div style="max-width: 65ch;">
																	```typescript
																if (configValues.autoApplyIfNeeded) {
																	const { userAllowedToApply } = await applyIfNeedsToApply({...})
														        }```
															</div>
														</li>
														<li id="tyt2aAf4B">
															<a href="#tyt2aAf4B" class="block-ref"></a>
															<div style="max-width: 65ch;">
																	initial fix:
															</div>
															<ul>
																<li id="Hb17OGPDo">
																	<a href="#Hb17OGPDo" class="block-ref"></a>
																	<div style="max-width: 65ch;">
																			https://github.com/kiprasmel/git-stacked-rebase/commit/6eadc9e601523fd39263de13007de56b4f7a991c
																	</div>
																	<ul>
																		<li id="H1GRvOHRH">
																			<a href="#H1GRvOHRH" class="block-ref"></a>
																			<div style="max-width: 65ch;">
																					&gt; currently `canAndShouldBeApplying` is only in that part of the logic.
																		to be fair, the problem arises only when we try to apply
																		before the rebase was finished.
																		but, it very well could be that the user (even tho unlikely) that user
																		runs `git-stacked-rebase` while a regular `git-rebase` is in progress,
																		thus causing the same issue.
																		TODO so we need to handle this everywhere, and the approach might be
																		different as well.
																			</div>
																		</li>
																		<li id="vBEuOOJiP">
																			<a href="#vBEuOOJiP" class="block-ref"></a>
																		</li>
																	</ul>
																</li>
																<li id="0OHtpRYYW">
																	<a href="#0OHtpRYYW" class="block-ref"></a>
																</li>
															</ul>
														</li>
														<li id="3H2ooZKvz">
															<a href="#3H2ooZKvz" class="block-ref"></a>
														</li>
													</ul>
												</li>
												<li id="F_p1CfNPO">
													<a href="#F_p1CfNPO" class="block-ref"></a>
												</li>
											</ul>
										</li>
										<li id="fXe6LMS6_">
											<a href="#fXe6LMS6_" class="block-ref"></a>
										</li>
									</ul>
								</li>
								<li id="DKa-jRDNh">
									<a href="#DKa-jRDNh" class="block-ref"></a>
									<div style="max-width: 65ch;">
											[[codemods]]
									</div>
									<ul>
										<li id="hA63HgZHP">
											<a href="#hA63HgZHP" class="block-ref"></a>
											<div style="max-width: 65ch;">
													{{[[TODO]]}} remember to extract `inlineTest` (test utils) from extraction-6 lol
											</div>
										</li>
									</ul>
								</li>
								<li id="TPMSyaEWn">
									<a href="#TPMSyaEWn" class="block-ref"></a>
								</li>
							</ul>
						</li>
						<li id="XEgIaD33b">
							<a href="#XEgIaD33b" class="block-ref"></a>
						</li>
						<li id="E3SlHCIZM">
							<a href="#E3SlHCIZM" class="block-ref"></a>
							<div style="max-width: 65ch;">
									{{[[TODO]]}} start using the `debug` lib
							</div>
						</li>
						<li id="5ZgJSHNoa">
							<a href="#5ZgJSHNoa" class="block-ref"></a>
						</li>
						<li id="pn2oFTuU6">
							<a href="#pn2oFTuU6" class="block-ref"></a>
							<div style="max-width: 65ch;">
									{{[[TODO]]}} add `--continue`, `--abort` as aliases to regular git rebase commands, for convenience
							</div>
							<ul>
								<li id="WbIQSWUAm">
									<a href="#WbIQSWUAm" class="block-ref"></a>
									<div style="max-width: 65ch;">
											{{[[TODO]]}} should we?
									</div>
								</li>
							</ul>
						</li>
						<li id="9uTJA-506">
							<a href="#9uTJA-506" class="block-ref"></a>
						</li>
						<li id="ymC2fOxY8">
							<a href="#ymC2fOxY8" class="block-ref"></a>
							<div style="max-width: 65ch;">
									{{[[TODO]]}} file mappings fn that takes in the repo&#39;s workdir and returns the wanted file
							</div>
							<ul>
								<li id="oO_--g6AC">
									<a href="#oO_--g6AC" class="block-ref"></a>
									<div style="max-width: 65ch;">
											or maybe just filename constants, since we&#39;ll need to pass in either the repo, or the fn that has the repo from a closure
									</div>
									<ul>
										<li id="8LRX_rcDZ">
											<a href="#8LRX_rcDZ" class="block-ref"></a>
											<div style="max-width: 65ch;">
													unless we do dependency injection, but we don&#39;t do that here™️
											</div>
										</li>
										<li id="CKdnXATbi">
											<a href="#CKdnXATbi" class="block-ref"></a>
											<div style="max-width: 65ch;">
													```typescript
										// const filesNames = {
										const filenames = {
										  rewrittenList: &quot;rewritten-list&quot;,
										} as const;```
											</div>
										</li>
									</ul>
								</li>
								<li id="dQ7N_gSpx">
									<a href="#dQ7N_gSpx" class="block-ref"></a>
								</li>
							</ul>
						</li>
						<li id="znc3jZoOd">
							<a href="#znc3jZoOd" class="block-ref"></a>
						</li>
						<li id="zLRAA8RD1">
							<a href="#zLRAA8RD1" class="block-ref"></a>
							<div style="max-width: 65ch;">
									o fuck, just realised when updating the CLI --help message - the `prompt` for `question` is a no no, at least in the library code (in cli code would be just fine).
							</div>
							<ul>
								<li id="_xR2rXJRW">
									<a href="#_xR2rXJRW" class="block-ref"></a>
									<div style="max-width: 65ch;">
											{{[[TODO]]}} okay i think it should be fine if we take in a callback function that will get this output for the library
									</div>
								</li>
								<li id="Fx8qMOzkb">
									<a href="#Fx8qMOzkb" class="block-ref"></a>
									<div style="max-width: 65ch;">
											applies to general interactions (__interactive__ kek) (except ofc the git-rebase-todo file since we provide an editor already)
									</div>
								</li>
								<li id="5XOgUiV33">
									<a href="#5XOgUiV33" class="block-ref"></a>
								</li>
							</ul>
						</li>
						<li id="yq_3rcb8r">
							<a href="#yq_3rcb8r" class="block-ref"></a>
						</li>
						<li id="K7-RsrMl5">
							<a href="#K7-RsrMl5" class="block-ref"></a>
							<div style="max-width: 65ch;">
									{{[[TODO]]}} handle failures if --apply was (attempted to be) used more than once - currently errors because file missing; should print (return) info message instead
							</div>
							<ul>
								<li id="CBOLcCrHA">
									<a href="#CBOLcCrHA" class="block-ref"></a>
									<div style="max-width: 65ch;">
											{{[[TODO]]}} same w/ --force -p, etc.
									</div>
								</li>
							</ul>
						</li>
						<li id="DYzIQRNEE">
							<a href="#DYzIQRNEE" class="block-ref"></a>
						</li>
						<li id="vPYtPt6K8">
							<a href="#vPYtPt6K8" class="block-ref"></a>
						</li>
					</ul>
				</li>
				<li id="SbB85_Qsi">
					<a href="#SbB85_Qsi" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) SbB85_Qsi
					</div>
				</li>
				<li id="dwCGEsMqa">
					<a href="#dwCGEsMqa" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) dwCGEsMqa
					</div>
				</li>
				<li id="1_Vvzylkm">
					<a href="#1_Vvzylkm" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) 1_Vvzylkm
					</div>
				</li>
				<li id="jIPHiFqXP">
					<a href="#jIPHiFqXP" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) jIPHiFqXP
					</div>
				</li>
				<li id="FWfm4c3eU">
					<a href="#FWfm4c3eU" class="block-ref"></a>
					<div style="max-width: 65ch;">
							(hidden) FWfm4c3eU
					</div>
				</li>
			</ul>
		</main>

		<aside>
			<script>
				// var localStorageKeyOfLinkedMentionsOrder = "notes.linked-mentions-order.12-21-2021";

				function toggleOrderOfLinkedMentions(btn /*, localStorageKey */) {
					var oldest = "oldest-first";
					var newest = "newest-first";

					var linkedMentions = document.getElementById("linked-mentions");
					var order = "data-order"
					var currentOrder = linkedMentions.attributes[order].value;

					if (currentOrder === oldest) {
						var newOrder = newest;

						btn.textContent = newOrder;
						// localStorage.setItem(localStorageKey, newOrder);

						linkedMentions.attributes[order].value = newOrder;
						linkedMentions.style["flex-direction"] = "column-reverse";

					} else if (currentOrder === newest) {
						var newOrder = oldest;

						btn.textContent = newOrder;
						// localStorage.setItem(localStorageKey, newOrder);

						linkedMentions.attributes[order].value = newOrder;
						linkedMentions.style["flex-direction"] = "column";
					} else {
						throw new Error("invalid order found: " + currentOrder);
					}
				}
			</script>

			<h2>
				Linked Mentions 
				(0
				in
				0
				pages)

				<button
					id="order-toggle"
					onclick="toggleOrderOfLinkedMentions(this)"
					title="shows current value. click to toggle."
				>
					newest-first
				</button>

			</h2>

			<ol
				id="linked-mentions"
				data-order="newest-first"
				style="display: flex; flex-direction: column-reverse;"
			>
				
			</ol>
		</aside>

		<footer>
			<!--
				TODO FIXME - fix the title into proper filename/url in a central place
				& use it here.
			-->
			
			<center>
				exported from
				<a target="_blank" rel="noopener" href="http://roamresearch.com">
					roam</a>
				via
				<a target="_blank" rel="noopener" href="http://github.com/kiprasmel/roam-traverse-graph">
					roam-traverse-graph</a>'s
				plugin
				<a target="_blank" rel="noopener" href="http://github.com/kiprasmel/roam-traverse-graph/tree/master/plugin-export-public-pages">
					plugin-export-public-pages</a>.

				<!--
				<span style="display: block; width: 1px; height: 100%;"></span>.
				-->

				view
				<a target="_blank" rel="noopener" href="http://github.com/kiprasmel/notes/tree/master/December 21st, 2021.html">source</a>

				&
				<a target="_blank" rel="noopener" href="https://github.com/kiprasmel/notes/commits/master/December 21st, 2021.html">history</a>.

				<!--
				by
				<a target="_blank" rel="noopener" href="http://github.com/kiprasmel">
					kiprasmel</a>,
				-->
			</center>

		</footer>
	</body>
</html>